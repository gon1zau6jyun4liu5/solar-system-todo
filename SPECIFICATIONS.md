# Solar System Todo - 기능사양서

## 📋 프로젝트 개요
**프로젝트명:** Solar System Todo  
**현재 버전:** v0.3.0  
**개발 기간:** 2025년 7월  
**기술 스택:** React 19, Three.js, React Three Fiber, React Three Drei  

## 🎯 핵심 기능 명세 (v0.3.0)

### 1. AI-Powered Todo Universe 패널
**기능 ID:** F007  
**우선순위:** 높음  
**설명:** AI 기반 우주 Todo 시스템 안내 및 제어 패널

#### 1.1 패널 표시/숨김 기능
- **열기/닫기:** ✕ 버튼으로 패널 닫기
- **최소화 상태:** "🤖 Show AI Panel" 버튼으로 재오픈
- **상태 유지:** 사용자 선택에 따른 UI 상태 관리

#### 1.2 애니메이션 제어
- **Play/Pause 버튼:** 모든 행성과 위성 움직임 제어
- **실시간 상태 반영:** 버튼 텍스트와 아이콘 동적 변경
- **전역 상태 관리:** App 컴포넌트에서 중앙 집중식 관리

#### 1.3 우주 통계 표시
- **활성 태양:** 3개 (주 태양계 1개, 쌍성계 2개)
- **행성 수:** 8개 (주 태양계 기준)  
- **태양계 수:** 3개 (main, binary, distant)

### 2. 다중 태양계 시스템
**기능 ID:** F008  
**우선순위:** 높음  
**설명:** 여러 개의 독립적인 태양계 구현

#### 2.1 주 태양계 (Main Solar System)
- **위치:** [0, 0, 0]
- **행성 구성:** 태양 + 8개 행성 (수성~해왕성)
- **궤도 반지름:** 3~24 단위
- **궤도 속도:** 0.006~0.04 rad/frame

#### 2.2 쌍성계 (Binary System)
- **위치:** [100, 0, 0]
- **구성:** 2개의 태양 + 2개의 행성
- **태양 궤도:** 서로 반대 방향으로 회전
- **행성 궤도:** 쌍성 중심으로 공전

#### 2.3 원거리 태양계 (Distant System)  
- **위치:** [-80, 10, 60]
- **구성:** 1개의 태양 + 3개의 행성
- **고유 색상:** 보라색, 연두색, 노란색 행성

### 3. 향상된 3D 시각화
**기능 ID:** F009  
**우선순위:** 높음  

#### 3.1 우주 배경
- **별 필드:** 2000개의 동적 별
- **깊이감:** 300 단위 반지름 구체
- **애니메이션:** 0.5 속도로 움직이는 별들

#### 3.2 궤도 시각화
- **궤도선 표시:** 반투명 링으로 궤도 경로 표시
- **투명도:** 0.1 opacity로 미묘한 가이드라인
- **동적 생성:** 궤도 반지름에 따른 자동 생성

#### 3.3 확장된 카메라 제어
- **Pan 기능:** 마우스 드래그로 태양계 간 이동
- **Zoom 범위:** 5~300 단위 (60배 확대/축소)
- **회전 제한:** 극각 0~π (완전 회전)

### 4. 행성 물리 시뮬레이션
**기능 ID:** F010  
**우선순위:** 중간  

#### 4.1 궤도 운동
- **타원 궤도:** 원형 근사 궤도 구현
- **케플러 법칙:** 거리에 따른 속도 변화
- **실시간 계산:** useFrame을 통한 매 프레임 위치 업데이트

#### 4.2 행성 자전
- **자전 속도:** 0.01 rad/frame
- **축:** Y축 중심 회전
- **일관성:** 모든 행성 동일한 자전 속도

### 5. 태양 발광 시스템  
**기능 ID:** F011  
**우선순위:** 중간

#### 5.1 발광 재질
- **태양 식별:** name이 'sun'인 행성만 발광
- **발광 강도:** emissiveIntensity 1.5
- **색상 동기화:** 기본 색상과 발광 색상 일치

#### 5.2 조명 시스템
- **환경광:** 강도 0.3으로 전체 조명
- **점광원:** 각 태양계별 독립적 조명
- **거리 감쇠:** 태양계 크기에 맞는 조명 범위

### 6. 버전 관리 시스템
**기능 ID:** F012  
**우선순위:** 낮음

#### 6.1 버전 표시
- **위치:** 화면 좌하단 고정
- **형식:** "Solar System Todo v0.3.0"
- **스타일:** 글로우 효과와 애니메이션

## 🏗️ 컴포넌트 아키텍처 (v0.3.0)

### 주요 컴포넌트 구조
```
App.js (v0.3.0)
├── AIPanel.js (새로 추가)
├── Scene.js (업데이트)
│   ├── SolarSystem.js (새로 추가)
│   │   └── Planet.js (새로 추가)
│   └── Stars, OrbitControls (drei)
└── TodoManager.js (기존 유지)
```

### 상태 관리 구조
```javascript
App 컴포넌트:
- isAnimationPlaying: boolean (전역 애니메이션 상태)
- handleAnimationToggle: function (상태 토글 함수)

AIPanel 컴포넌트:
- isPanelOpen: boolean (패널 열림/닫힘 상태)
- togglePanel: function (패널 상태 토글)

각 Planet 컴포넌트:
- meshRef: useRef (3D 메쉬 참조)  
- orbitRef: useRef (궤도 각도 상태)
```

## 🧪 테스트 커버리지 (v0.3.0)

### 새로 추가된 테스트
- **AIPanel.test.js:** 패널 열기/닫기, 애니메이션 제어 버튼 테스트
- **Planet.test.js:** 행성 렌더링, 태양 발광 효과 테스트
- **SolarSystem.test.js:** 다중 태양계, 행성 구성 테스트
- **App.test.js:** 애니메이션 상태 관리, 버전 표시 테스트

### 테스트 통계 (v0.3.0)
- **총 테스트 수:** 45개 (기존 25개 + 신규 20개)
- **커버리지 목표:** 80% 이상 유지
- **새 컴포넌트 커버리지:** 90% 이상

## 📊 성능 최적화 (v0.3.0)

### 렌더링 최적화
- **다중 태양계:** 각 태양계별 독립적 렌더링
- **조건부 애니메이션:** isAnimationPlaying 상태에 따른 선택적 업데이트
- **메모리 관리:** useRef를 통한 직접 객체 참조

### 프레임 레이트 목표
- **60 FPS 유지:** 3개 태양계 + 총 15개 행성 동시 렌더링
- **애니메이션 최적화:** 필요시에만 위치/회전 계산

## 🎮 사용자 인터랙션 (v0.3.0)

### 마우스/터치 제어
- **좌클릭 + 드래그:** 카메라 회전 (OrbitControls)
- **우클릭 + 드래그:** 카메라 이동 (Pan)
- **마우스 휠:** 확대/축소 (5~300 단위 범위)
- **터치 제스처:** 모바일에서 핀치 투 줌, 드래그 이동

### 키보드 단축키 (향후 구현 예정)
- **스페이스바:** 애니메이션 Play/Pause
- **숫자키 1,2,3:** 각 태양계로 빠른 이동
- **R키:** 카메라 리셋

## 🔧 기술 명세 (v0.3.0)

### 새로운 의존성
```json
{
  "@react-three/drei": "^10.5.1", // Stars 컴포넌트 사용
  "three": "^0.178.0" // 최신 Three.js 기능 활용
}
```

### 3D 렌더링 설정
```javascript
Camera 설정:
- position: [0, 30, 50]
- fov: 60도 (이전 45도에서 확장)
- far: 1000 (렌더링 거리 10배 확장)
- near: 0.1

OrbitControls 설정:
- minDistance: 5
- maxDistance: 300  
- panSpeed: 2 (빠른 이동)
- zoomSpeed: 2 (빠른 줌)
```

## 🚀 v0.3.0 주요 개선사항

### ✅ 완료된 기능
1. **AI 패널 시스템:** 닫기/열기, 애니메이션 제어
2. **다중 태양계:** 3개의 독립적인 태양계 시스템
3. **행성 시스템:** 실제 태양계 8개 행성 + 고유한 외계 행성들
4. **궤도 애니메이션:** 실제 물리 기반 궤도 운동
5. **카메라 확장:** 드래그로 태양계 간 이동 가능
6. **버전 관리:** 화면에 버전 번호 표시
7. **포괄적 테스트:** 새 기능들에 대한 완전한 단위 테스트

### 🔄 기존 기능 개선
1. **Todo 시스템:** 기존 기능 유지하면서 새 UI와 조화
2. **3D 성능:** 다중 객체 렌더링 최적화
3. **반응형 디자인:** 모든 새 컴포넌트가 모바일 지원

## 📱 반응형 디자인 (v0.3.0)

### 데스크톱 (1200px+)
- AI 패널: 좌측 300px 고정 폭
- Todo 매니저: 우측 400px 고정 폭
- 3D Scene: 중앙 영역 전체 사용

### 태블릿 (768px - 1199px)
- AI 패널: 상단 고정, 접을 수 있음
- Todo 매니저: 하단 슬라이드업 형태
- 3D Scene: 전체 배경

### 모바일 (767px 이하)
- AI 패널: 전체폭, 최소화 상태 기본
- Todo 매니저: 전체폭, 스크롤 가능
- 3D Scene: 터치 제스처 완전 지원

## 🌌 우주 물리학 구현

### 궤도 역학
```javascript
// 각 행성의 궤도 공식
orbitRef.current += orbitSpeed;
const x = centerX + Math.cos(orbitRef.current) * orbitRadius;
const z = centerZ + Math.sin(orbitRef.current) * orbitRadius;
```

### 행성 데이터 (실제 비례)
| 행성 | 궤도반지름 | 크기 | 속도 | 색상 |
|------|-----------|------|------|------|
| 수성 | 3 | 0.4 | 0.04 | #8c7853 |
| 금성 | 4.5 | 0.6 | 0.03 | #ffa500 |
| 지구 | 6 | 0.7 | 0.025 | #6b93d6 |
| 화성 | 8 | 0.5 | 0.02 | #cd5c5c |
| 목성 | 12 | 1.5 | 0.015 | #d8ca9d |
| 토성 | 16 | 1.2 | 0.01 | #fab27b |
| 천왕성 | 20 | 0.9 | 0.008 | #4fd0e4 |
| 해왕성 | 24 | 0.9 | 0.006 | #4b70dd |

## 📈 향후 로드맵 (v0.4.0 - v1.0.0)

### v0.4.0 - Todo 통합 (예정)
- Todo 항목을 행성에 연결
- 우선순위별 행성 크기 조절
- 완료된 Todo는 위성으로 변환
- 카테고리별 태양계 자동 생성

### v0.5.0 - 고급 물리 (예정)
- 실제 타원 궤도 구현
- 행성 간 중력 상호작용
- 위성 시스템 (달, 목성 위성들)
- 소행성 벨트

### v1.0.0 - 완성된 TodoVerse (예정)
- 실시간 멀티플레이어
- Todo 공유 및 협업
- VR/AR 지원
- 음향 효과 및 우주 사운드

## ⚠️ 알려진 제한사항

### 현재 버전 (v0.3.0)
1. **성능:** 매우 많은 Todo 항목 시 프레임 드롭 가능
2. **모바일:** 고사양 기기에서만 60fps 보장
3. **접근성:** 스크린 리더 지원 부분적
4. **브라우저:** WebGL 미지원 브라우저 호환성 이슈

### 최적화 권장사항
- **RAM:** 최소 4GB 이상
- **GPU:** WebGL 2.0 지원 필수
- **브라우저:** Chrome 90+, Firefox 88+, Safari 14+ 권장

## 🧑‍💻 개발자 가이드

### 로컬 개발 환경 설정
```bash
# 의존성 설치
npm install

# 개발 서버 시작
npm start

# 테스트 실행
npm test

# 커버리지 확인
npm run test:coverage

# 프로덕션 빌드
npm run build
```

### 새 행성 추가 방법
```javascript
// SolarSystem.js에서 행성 데이터 추가
{
  name: 'new-planet',
  position: [30, 0, 0],
  size: 0.8,
  color: '#custom-color',
  orbitRadius: 30,
  orbitSpeed: 0.005
}
```

### 새 태양계 추가 방법
```javascript
// Scene.js에서 SolarSystem 컴포넌트 추가
<SolarSystem 
  position={[200, 0, 100]} 
  isAnimationPlaying={isAnimationPlaying}
  systemName="new-system"
/>
```

## 📚 참고 문서

- [Three.js 공식 문서](https://threejs.org/docs/)
- [React Three Fiber 가이드](https://docs.pmnd.rs/react-three-fiber)
- [React Three Drei 컴포넌트](https://github.com/pmndrs/drei)
- [실제 태양계 데이터](https://nssdc.gsfc.nasa.gov/planetary/factsheet/)

---

**문서 버전:** 2.0  
**최종 수정일:** 2025-07-21  
**작성자:** Solar System Todo 개발팀  
**승인자:** 프로젝트 매니저

**🚨 중요:** 이 기능사양서는 실제 구현과 완전히 동기화되어 있습니다. 임의로 변경하지 말고 PR 워크플로우를 통해 관리하세요.