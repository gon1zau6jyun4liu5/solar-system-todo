# Solar System Todo App - 기능사양서 v0.3.1

## 📋 프로젝트 개요
**프로젝트명:** Solar System Todo App  
**현재 버전:** v0.3.1  
**레포지토리:** https://github.com/gon1zau6jyun4liu5/solar-system-todo  
**설명:** AI 기반 3D 태양계 시뮬레이션과 포괄적인 Todo 관리 시스템이 결합된 인터랙티브 웹 애플리케이션

## 🚀 v0.3.1 긴급 복구 업데이트

### **복구된 핵심 기능**
1. **AI-Powered Todo Universe** - AI 제어판이 복구됨
2. **완전한 계층 구조** - 태양, 행성, 위성 시스템 복구
3. **애니메이션 제어** - Start/Stop 버튼 복구
4. **자동 태양 생성** - AI가 todo를 그룹핑하여 태양계 자동 생성
5. **프로그레스 백분율** - 작성일 대비 데드라인 진행률 표시
6. **유성 시스템** - AI 액션 제안을 위한 유성 충돌 시스템

### **새로운 기능**
1. **멀티 솔라 시스템** - 카테고리별로 여러 태양계 생성
2. **Meteor 충돌 시스템** - 긴급한 todo에 대한 AI 액션 제안
3. **향상된 프로그레스 표시** - 실시간 백분율 계산 및 표시
4. **자동 태양 생성** - todo 그룹당 자동으로 태양 생성

## 🛠️ 기술 스택
- **Frontend:** React 19.1.0
- **3D 렌더링:** Three.js 0.178.0, React Three Fiber 9.2.0
- **3D 유틸리티:** React Three Drei 10.5.1 (Text 컴포넌트 포함)
- **AI 분류:** 자체 개발 AI 분류 엔진
- **테스팅:** Jest, React Testing Library (80%+ 커버리지)
- **개발 도구:** Create React App 5.0.1
- **상태 관리:** React Hooks (useState, useEffect)
- **데이터 영속성:** LocalStorage

## 🌌 멀티 솔라 시스템 명세

### **자동 태양 생성 시스템**
```javascript
// AI가 자동으로 태양계를 생성하는 로직
const systems = Object.values(grouped).map((system, index) => {
  const suns = system.todos.filter(todo => todo.hierarchyType === 'sun');
  
  return {
    ...system,
    suns: suns.length > 0 ? suns : [{ // 태양이 없으면 자동 생성
      id: `auto-sun-${system.id}`,
      text: `${system.category.toUpperCase()} System Goals`,
      category: system.category,
      hierarchyType: 'sun',
      priority: 'high',
      isAutoGenerated: true
    }],
    planets: system.todos.filter(todo => todo.hierarchyType === 'planet'),
    satellites: system.todos.filter(todo => todo.hierarchyType === 'satellite')
  };
});
```

### **계층 구조 (Hierarchy System)**
1. **☀️ Sun (태양)** - 주요 목표 및 비전
   - 각 카테고리/프로젝트의 중심
   - AI가 자동으로 생성 (유저가 만들지 않은 경우)
   - 크기: 2.0-5.0 단위
   - 위치: 각 태양계의 중심 (0, 0, 0)

2. **🪐 Planet (행성)** - 중급 프로젝트 
   - 태양 주변을 공전
   - 궤도 반지름: 12-28 단위
   - 크기: 0.8-2.0 단위

3. **🛰️ Satellite (위성)** - 소규모 태스크
   - 행성 주변을 공전
   - 궤도 반지름: 2-4 단위  
   - 크기: 0.15-0.5 단위

## ⚡ 애니메이션 제어 시스템

### **AIPanel 컴포넌트**
```javascript
const AIPanel = ({ onAnimationToggle, isAnimationPlaying }) => {
  return (
    <div className="ai-panel">
      <h3>🤖 AI-Powered Todo Universe</h3>
      <div className="how-it-works">
        <h4>How it works:</h4>
        <ul>
          <li>🌟 Create todos and watch them orbit like planets</li>
          <li>🚀 High priority tasks become bright suns</li>
          <li>🌍 Completed tasks form stable planetary systems</li>
          <li>🌌 Multiple solar systems represent different projects</li>
        </ul>
      </div>
      <button onClick={onAnimationToggle}>
        {isAnimationPlaying ? '⏸️ Pause' : '▶️ Play'} Solar System
      </button>
    </div>
  );
};
```

### **애니메이션 적용**
- **공전 운동:** `orbitSpeed = isAnimationPlaying ? baseSpeed : 0`
- **자전 운동:** 항상 유지 (정지 시에도 회전)
- **유성 이동:** 애니메이션 정지 시 유성도 정지

## 📊 프로그레스 백분율 시스템

### **계산 공식**
```javascript
const calculateProgressPercentage = (todo) => {
  if (!todo.deadline || !todo.createdAt) return null;
  
  const created = new Date(todo.createdAt);
  const deadline = new Date(todo.deadline);
  const now = new Date();
  
  const totalTime = deadline.getTime() - created.getTime();
  const remainingTime = deadline.getTime() - now.getTime();
  
  if (remainingTime <= 0) return 0; // Overdue
  if (totalTime <= 0) return 100; // Invalid dates
  
  return Math.max(0, Math.min(100, (remainingTime / totalTime) * 100));
};
```

### **표시 방식**
- **위치:** 각 천체 위쪽에 3D 텍스트로 표시
- **색상:** 
  - 51-100%: 🟢 녹색 (#44ff44)
  - 26-50%: 🟡 주황색 (#ffaa00) 
  - 0-25%: 🔴 빨간색 (#ff4444)
- **업데이트:** 실시간으로 계속 업데이트

## ☄️ 유성 시스템 (Meteor System)

### **AI 액션 제안 메커니즘**
```javascript
// 긴급한 todo에 대해 유성 생성
const generateMeteorsForUrgentTodos = (todos) => {
  const urgentTodos = todos.filter(todo => 
    !todo.completed && 
    todo.visualProperties?.daysUntilDeadline <= 2
  );
  
  return urgentTodos.map((todo, index) => ({
    id: `meteor-${todo.id}`,
    todoData: todo,
    targetTodoId: todo.id,
    startPosition: [
      Math.random() * 100 - 50,
      Math.random() * 50 + 20,
      Math.random() * 100 - 50
    ],
    speed: 0.5 + Math.random() * 0.5
  }));
};
```

### **유성 동작**
1. **생성 조건:** 데드라인까지 2일 이하 남은 todo
2. **시작 위치:** 무작위 원거리 위치
3. **목표:** 해당 todo의 행성/위성으로 돌진
4. **충돌 효과:** 처리하지 않으면 해당 todo와 충돌
5. **시각 효과:** 꼬리와 글로우, 파티클 트레일

### **유성 속성**
- **크기:** 0.3 + (5 - urgencyLevel) * 0.1
- **속도:** 0.5 + (5 - urgencyLevel) * 0.2  
- **색상:** 긴급도에 따라 빨강-주황-노랑
- **충돌 범위:** 2 단위 이내

## 🎯 AI Todo 분류 시스템

### **카테고리별 태양계 자동 생성**
```javascript
const categories = {
  'work': { defaultPriority: 'high', estimatedDays: 7 },
  'personal': { defaultPriority: 'medium', estimatedDays: 14 },
  'education': { defaultPriority: 'high', estimatedDays: 10 },
  'finance': { defaultPriority: 'high', estimatedDays: 3 },
  'home': { defaultPriority: 'medium', estimatedDays: 5 },
  'health': { defaultPriority: 'high', estimatedDays: 7 }
};
```

### **계층 자동 분류**
- **Sun 타입:** goal, objective, mission, vision, strategy
- **Planet 타입:** project, initiative, plan, campaign, program  
- **Satellite 타입:** task, action, step, item, todo

## 🎨 사용자 인터페이스 v0.3.1

### **AIPanel (좌측 상단)**
- **크기:** 300px × 최대 80vh
- **위치:** fixed, top: 20px, left: 20px
- **배경:** rgba(15, 15, 15, 0.95) with blur
- **테두리:** 2px solid #00aaff
- **기능:** 
  - 애니메이션 on/off 토글
  - 사용법 설명
  - 우주 상태 정보
  - 내비게이션 도움말

### **AITodoManager (우측 상단)**  
- **크기:** 400px × 최대 80vh
- **위치:** fixed, top: 20px, right: 20px
- **AI 통계:** Total, Completed, Urgent, Systems 수 표시
- **필터링:** 계층별, 카테고리별, 긴급도별
- **AI 인사이트:** 생산성 트렌드 분석

### **버전 표시 (좌측 하단)**
- **위치:** fixed, bottom: 20px, left: 20px  
- **텍스트:** "Solar System Todo v0.3.1"
- **스타일:** 글로우 효과 with 애니메이션

## 🧪 테스트 커버리지 v0.3.1

### **새로운 테스트 모듈**
1. **App.test.js** - 메인 앱 통합 테스트
2. **Meteor.test.js** - 유성 컴포넌트 테스트  
3. **AITodoManager.test.js** - AI 관리자 테스트
4. **aiClassifier.test.js** - AI 분류 엔진 테스트

### **테스트 커버리지 항목**
- ✅ 애니메이션 제어 기능
- ✅ 자동 태양 생성
- ✅ 프로그레스 백분율 계산
- ✅ 유성 충돌 시스템
- ✅ AI 분류 정확도  
- ✅ 멀티 솔라 시스템 렌더링
- ✅ 계층 구조 정확성
- ✅ 실시간 업데이트

## 📊 성능 최적화 v0.3.1

### **3D 렌더링 최적화**
- **Frustum Culling:** 화면 밖 객체 제외
- **LOD 시스템:** 거리에 따른 품질 조절
- **Instance Rendering:** 동일 객체 재사용
- **Animation Frame:** 60fps 목표 유지

### **AI 처리 최적화**
- **분류 캐싱:** 동일 텍스트 재분류 방지
- **배치 처리:** 여러 todo 동시 분류
- **비동기 처리:** UI 블로킹 방지

## 🔧 컴포넌트 아키텍처 v0.3.1

```
App.js (메인 상태 관리)
├── AIPanel.js (애니메이션 제어)
├── MultiSolarSystemScene.js (3D 환경)
│   ├── AISun.js × N (자동 생성 태양들)
│   ├── AIPlanet.js × N (프로젝트 행성들) 
│   ├── AISatellite.js × N (태스크 위성들)
│   └── Meteor.js × N (긴급 액션 유성들)
├── AITodoManager.js (AI 기반 Todo 시스템)
│   ├── AITodoForm.js (AI 향상 폼)
│   ├── TodoList.js (목록)
│   └── TodoItem.js (개별 아이템)
└── utils/aiClassifier.js (AI 분류 엔진)
```

### **데이터 플로우**
1. **AITodoManager** → AI 분류 → **aiClassifier**
2. **aiClassifier** → 구조화된 데이터 → **MultiSolarSystemScene**  
3. **MultiSolarSystemScene** → 자동 태양 생성 → **AISun**
4. **App** → 애니메이션 상태 → 모든 천체 컴포넌트
5. **Meteor** → 충돌 감지 → **onCollision** 콜백

## 🎮 사용자 상호작용 플로우 v0.3.1

### **애니메이션 제어**
1. AIPanel에서 "Pause/Play" 버튼 클릭
2. `isAnimationPlaying` 상태 토글
3. 모든 천체의 공전 운동 정지/재시작
4. 자전 운동은 계속 유지

### **자동 태양계 생성**
1. 새 todo 생성 시 AI가 카테고리 분류
2. 해당 카테고리의 태양계 확인
3. 태양이 없으면 자동으로 태양 생성
4. 계층에 따라 적절한 궤도에 배치

### **유성 시스템 상호작용**
1. 데드라인 2일 이하 todo 감지
2. 유성 자동 생성 및 목표 설정
3. 유성이 해당 천체로 돌진
4. 충돌 시 경고 효과 및 콜백 실행

## 📈 지표 및 분석 v0.3.1

### **AI 인사이트**
- **생산성 트렌드:** 주간 완료율 계산
- **긴급도 분석:** 위험 todo 감지 및 알림
- **카테고리 밸런스:** 작업 분포 분석
- **시스템 건강도:** 각 태양계별 완료율

### **실시간 메트릭**
- **활성 시스템 수:** 카테고리별 태양계 개수
- **긴급 유성 수:** 충돌 위험 todo 개수  
- **전체 진행률:** 모든 todo의 평균 진행률
- **애니메이션 성능:** FPS 및 렌더링 시간

## 🔮 로드맵 (v0.4.0 예정)

### **다음 단계 기능**
1. **고급 AI 기능**
   - 자연어 처리 향상
   - 스마트 데드라인 예측
   - 자동 우선순위 조정

2. **향상된 시각 효과**
   - 파티클 시스템
   - 동적 배경  
   - 주변 환경 효과

3. **협업 기능**
   - 멀티유저 지원
   - 실시간 동기화
   - 팀 태양계 공유

## ✅ 품질 보증 v0.3.1

### **복구 검증 체크리스트**
- [x] AI Panel 복구 완료
- [x] 애니메이션 제어 복구 완료  
- [x] 자동 태양 생성 구현 완료
- [x] 프로그레스 백분율 표시 완료
- [x] 유성 시스템 구현 완료
- [x] 계층 구조 (태양-행성-위성) 완료
- [x] 클릭 상호작용 복구 완료
- [x] 테스트 커버리지 80% 달성

### **성능 기준**
- **렌더링:** 60fps 유지
- **메모리:** 브라우저 제한 내
- **로딩:** 3초 이내 초기화
- **응답성:** 모든 인터랙션 100ms 이내

## 🚨 중요 정책 v0.3.1

### **기능 완전성 보장**
- 모든 v0.3.0 기능 + AI 패널 복구 완료
- 애니메이션 제어 시스템 완전 복구
- 계층 구조 시스템 완전 복구  
- 유성 충돌 시스템 신규 추가
- 프로그레스 백분율 시스템 완전 구현

### **사양 변경 금지**
- 기능사양서 명시 사항 임의 변경 금지
- PR 워크플로우를 통한 변경사항 관리
- 테스트 통과 후에만 사양서 업데이트

---

**문서 버전:** 3.1  
**최종 수정일:** 2025-07-21  
**작성자:** Solar System Todo 개발팀  
**현재 상태:** v0.3.1 긴급 복구 완료

**🎉 v0.3.1 복구 달성 목표:**
- ✅ AI-Powered Todo Universe 패널 복구
- ✅ 애니메이션 Start/Stop 제어 복구
- ✅ 태양-행성-위성 계층 구조 복구  
- ✅ 자동 태양 생성 시스템 구현
- ✅ 프로그레스 백분율 실시간 표시
- ✅ 유성 충돌 시스템 (AI 액션 제안)
- ✅ 클릭 인터랙션 완전 복구
- ✅ 포괄적 테스트 커버리지